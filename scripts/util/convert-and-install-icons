#!/bin/bash

OUTPUT="$2"
ICON_RESOLUTIONS="16x16 24x24 32x32 48x48 64x64 96x96 128x128 192x192 256x256"

IMAGE="$1"
IMAGE_NAME=$(basename "$IMAGE")

IFS=" " read -ra RESOLUTIONS <<< "$ICON_RESOLUTIONS"
for ICON_RESOLUTION in "${RESOLUTIONS[@]}"; do
    TARGET_FOLDER="$OUTPUT/$ICON_RESOLUTION/apps"
    mkdir -p "$TARGET_FOLDER"
    TARGET="$TARGET_FOLDER/$IMAGE_NAME"
    echo "$TARGET"
    convert "$IMAGE" -resize "$ICON_RESOLUTION" "$TARGET"
done

